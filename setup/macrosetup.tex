%% Custom commands
%% ===============

%% enable glossary style to have final string inserted in both long and short
\DeclareDocumentCommand{\acrdbl}{ggo}{%
  {%
    \IfNoValueTF {#2} {%
      \IfNoValueTF {#3} {% label: #1, opts: none, final: none
        \ifglsused{#1}{% subsequent use
          \glsdisp{#1}{\glsentryshort{#1}}%
        }{% first use
          \glsdisp{#1}{\glsentrylong{#1} (\glsentryshort{#1})}%
        }%
      } {% label: #1, opts: none, final: #3
        \ifglsused{#1}{%  subsequent use
          \glsdisp{#1}{\glsentryshort{#1}#3}%
        }{% first use
          \glsdisp{#1}{\glsentrylong{#1} #3 (\glsentryshort{#1}#3)}%
        }%
      }%
    } {%
      \IfNoValueTF {#3} {% label: #2, opts: #1, final: none
        \ifglsused{#2}{%  subsequent use
          \glsdisp[#1]{#2}{\glsentryshort{#2}}%
        }{% first use
          \glsdisp[#1]{#2}{\glsentrylong{#2} (\glsentryshort{#2})}%
        }%
      } {% label: #2, opts: #1, final: #3
        \ifglsused{#2}{% subsequent use
          \glsdisp[#1]{#2}{\glsentryshort{#2}#3}%
        }{% first use
          \glsdisp[#1]{#2}{\glsentrylong{#2} #3 (\glsentryshort{#2}#3)}%
        }%
      }%
    }%
  }%
}%
\DeclareDocumentCommand{\Acrdbl}{ggo}{%
  {%
    \IfNoValueTF {#2} {%
      \IfNoValueTF {#3} {% label: #1, opts: none, final: none
        \ifglsused{#1}{% subsequent use
          \glsdisp{#1}{\Glsentryshort{#1}}%
        }{% first use
          \glsdisp{#1}{\Glsentrylong{#1} (\glsentryshort{#1})}%
        }%
      } {% label: #1, opts: none, final: #3
        \ifglsused{#1}{%  subsequent use
          \glsdisp{#1}{\Glsentryshort{#1}#3}%
        }{% first use
          \glsdisp{#1}{\Glsentrylong{#1} #3 (\glsentryshort{#1}#3)}%
        }%
      }%
    } {%
      \IfNoValueTF {#3} {% label: #2, opts: #1, final: none
        \ifglsused{#2}{%  subsequent use
          \glsdisp[#1]{#2}{\Glsentryshort{#2}}%
        }{% first use
          \glsdisp[#1]{#2}{\Glsentrylong{#2} (\glsentryshort{#2})}%
        }%
      } {% label: #2, opts: #1, final: #3
        \ifglsused{#2}{% subsequent use
          \glsdisp[#1]{#2}{\Glsentryshort{#2}#3}%
        }{% first use
          \glsdisp[#1]{#2}{\Glsentrylong{#2} #3 (\glsentryshort{#2}#3)}%
        }%
      }%
    }%
  }%
}%
\DeclareDocumentCommand{\acrdblpl}{ggo}{%
  {%
    \IfNoValueTF {#2} {%
      \IfNoValueTF {#3} {% label: #1, opts: none, final: none
        \ifglsused{#1}{% subsequent use
          \glsdisp{#1}{\glsentryshortpl{#1}}%
        }{% first use
          \glsdisp{#1}{\glsentrylongpl{#1} (\glsentryshortpl{#1})}%
        }%
      } {% label: #1, opts: none, final: #3
        \ifglsused{#1}{%  subsequent use
          \glsdisp{#1}{\glsentryshort{#1}#3\glspluralsuffix}%
        }{% first use
          \glsdisp{#1}{\glsentrylongpl{#1} #3 (\glsentryshort{#1}#3\glspluralsuffix)}%
        }%
      }%
    } {%
      \IfNoValueTF {#3} {% label: #2, opts: #1, final: none
        \ifglsused{#2}{%  subsequent use
          \glsdisp[#1]{#2}{\glsentryshortpl{#2}}%
        }{% first use
          \glsdisp[#1]{#2}{\glsentrylongpl{#2} (\glsentryshortpl{#2})}%
        }%
      } {% label: #2, opts: #1, final: #3
        \ifglsused{#2}{% subsequent use
          \glsdisp[#1]{#2}{\glsentryshort{#2}#3\glspluralsuffix}%
        }{% first use
          \glsdisp[#1]{#2}{\glsentrylongpl{#2} #3 (\glsentryshort{#2}#3\glspluralsuffix)}%
        }%
      }%
    }%
  }%
}%
\DeclareDocumentCommand{\Acrdblpl}{ggo}{%
  {%
    \IfNoValueTF {#2} {%
      \IfNoValueTF {#3} {% label: #1, opts: none, final: none
        \ifglsused{#1}{% subsequent use
          \glsdisp{#1}{\Glsentryshortpl{#1}}%
        }{% first use
          \glsdisp{#1}{\Glsentrylongpl{#1} (\Glsentryshortpl{#1})}%
        }%
      } {% label: #1, opts: none, final: #3
        \ifglsused{#1}{%  subsequent use
          \glsdisp{#1}{\Glsentryshort{#1}#3\glspluralsuffix}%
        }{% first use
          \glsdisp{#1}{\Glsentrylongpl{#1} #3 (\Glsentryshort{#1}#3\glspluralsuffix)}%
        }%
      }%
    } {%
      \IfNoValueTF {#3} {% label: #2, opts: #1, final: none
        \ifglsused{#2}{%  subsequent use
          \glsdisp[#1]{#2}{\Glsentryshortpl{#2}}%
        }{% first use
          \glsdisp[#1]{#2}{\Glsentrylongpl{#2} (\Glsentryshortpl{#2})}%
        }%
      } {% label: #2, opts: #1, final: #3
        \ifglsused{#2}{% subsequent use
          \glsdisp[#1]{#2}{\Glsentryshort{#2}#3\glspluralsuffix}%
        }{% first use
          \glsdisp[#1]{#2}{\Glsentrylongpl{#2} #3 (\Glsentryshort{#2}#3\glspluralsuffix)}%
        }%
      }%
    }%
  }%
}%

\newcommand*\acrrev[2][]{%
  \ifglsused{#2}{%
    %% subsequent use
    \glsdisp[#1]{#2}{\glsentryshort{#2}}%
  }{%
    %% first use
    \glsdisp[#1]{#2}{\glsentryshort{#2}\space(\glsentrylong{#2})}%
  }%
}
\newcommand*\Acrrev[2][]{%
  \ifglsused{#2}{%
    %% subsequent use
    \glsdisp[#1]{#2}{\Glsentryshort{#2}}%
  }{%
    %% first use
    \glsdisp[#1]{#2}{\Glsentryshort{#2}\space(\glsentrylong{#2})}%
  }%
}
\newcommand*\acrrevpl[2][]{%
  \ifglsused{#2}{%
    %% subsequent use
    \glsdisp[#1]{#2}{\glsentryshortpl{#2}}%
  }{%
    %% first use
    \glsdisp[#1]{#2}{\glsentryshortpl{#2}\space(\glsentrylongpl{#2})}%
  }%
}
\newcommand*\Acrrevpl[2][]{%
  \ifglsused{#2}{%
    %% subsequent use
    \glsdisp[#1]{#2}{\Glsentryshortpl{#2}}%
  }{%
    %% first use
    \glsdisp[#1]{#2}{\Glsentryshortpl{#2}\space(\glsentrylongpl{#2})}%
  }%
}

%% underscript in text
\newcommand{\textunderscript}[1]{$_{\text{#1}}$}

%% rotated table header
\newcommand{\mcrot}[4]{\multicolumn{#1}{#2}{\rlap{\rotatebox{#3}{#4}~}}}

%% allow table footnotes (not numeric) to be used multiple times
\makeatletter
\newcommand\footnoteref[1]{\protected@xdef\@thefnmark{\ref{#1}}\@footnotemark}
\makeatother

%% add number in stared align environment
\newcommand\numberthis{\addtocounter{equation}{1}\tag{\theequation}}

%% Special characters for number sets, e.g. real or complex numbers.
\newcommand{\C}{\mathbb{C}}
\newcommand{\K}{\mathbb{K}}
\newcommand{\Nat}{\mathbb{N}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\X}{\mathbb{X}}

%% Fixed/scaling delimiter examples (see mathtools documentation)
\DeclarePairedDelimiter\abs{\lvert}{\rvert}
\DeclarePairedDelimiter\norm{\lVert}{\rVert}

%% Use the alternative epsilon per default and define the old one as \oldepsilon
\let\oldepsilon\epsilon
\renewcommand{\epsilon}{\ensuremath\varepsilon}

%% Also set the alternate phi as default.
\let\oldphi\phi
\renewcommand{\phi}{\ensuremath{\varphi}}

\newcommand\given[1][]{\:#1\vert\:}
\let\existstemp\exists
\let\foralltemp\forall
\renewcommand{\exists}{\ensuremath\enskip\existstemp\:}
\renewcommand{\forall}{\ensuremath\enskip\foralltemp\:}

%% excerpts from SfS texab.sty
%% ===========================
%% R program
\newcommand*{\Rp}{\textsf{R}$\;$}
%% the epsfCfile function used in an example
\makeatletter
\newcommand{\@epsFFile}[2]{\includegraphics[#1]{#2}}
\newcommand{\epsFracFile}[2]{\@epsFFile{width=#1\textwidth}{#2}}%
\newcommand{\epsFracFileRot}[3][-90]{\@epsFFile{angle=#1,width=#2\textwidth}{#3}}
\newcommand{\epsfCfile}[2]{\centerline{\epsFracFile{#1}{#2}}}%
\newcommand{\epsfCfileRot}[3][-90]{\centerline{\epsFracFileRot[#1]{#2}{#3}}}%
\makeatother

\DeclareMathOperator{\fdr}{fdr}
\DeclareMathOperator{\aic}{AIC}
\DeclareMathOperator{\logit}{logit}
\DeclareMathOperator{\med}{med}
\DeclareMathOperator{\median}{median}
\DeclareMathOperator{\Med}{Med}
\DeclareMathOperator{\mad}{mad}
\DeclareMathOperator{\E}{\mathrm{E}}
\DeclareMathOperator{\var}{var}
\DeclareMathOperator{\Var}{Var}
\DeclareMathOperator{\Cov}{Cov}
\DeclareMathOperator{\cov}{cov}
\DeclareMathOperator{\Cor}{Corr}
\DeclareMathOperator{\cor}{corr}
\DeclareMathOperator{\se}{se}
\DeclareMathOperator{\sd}{sd}
\DeclareMathOperator{\sign}{sign}
\DeclareMathOperator{\trace}{tr}
\DeclareMathOperator{\const}{const}
\DeclareMathOperator{\diag}{diag}
%% Nachteil von diesen (wegen \limits !?): \argmax_\beta setzt \beta
%% *unterhalb*, auch inline, was  \max_\beta nicht tut
%% \newcommand{\argmin}{\mathop{\arg \min}\limits}
%% \newcommand{\argmax}{\mathop{\arg \max}\limits}
%% \newcommand{\ave}{\mathop{ave}\limits}
%% This is following http://en.wikipedia.org/wiki/Arg_max 's recommendation:
\DeclareMathOperator*{\ave}{ave}
\DeclareMathOperator*{\argmin}{arg\, min}
\DeclareMathOperator*{\argmax}{arg\, max}
%
\DeclareMathOperator{\IF}{IF}
\DeclareMathOperator{\und}{ und }
\DeclareMathOperator{\oder}{ oder }
%\def\mit{\mathrm{ mit }}  %-- causes some problems with \mbox or \boldmath !!!
\DeclareMathOperator{\for}{ for }
\DeclareMathOperator{\where}{ where }
\DeclareMathOperator{\with}{ with }
%%-------  NB.  << NEVER >> REdefine  \or !!! ----
%% Not ``\and'': this is used in \author

% - Math. Operatoren
\newcommand{\op}[1]{\mathop{#1}}%was\newcommand{\op}[1]{\kern-.2em #1\kern-.2em}
% \newcommand{\oneover}[1]{{1\over#1}\,\,}
\newcommand{\oneover}[1]{{\textstyle 1\over#1}}
\newcommand{\inv}{^{-1}}
\newcommand{\sups}[1]{^{(#1)}}
%%-- shorter, for convergence ...==== unnecessary ===
%%-- There is already \to  (in standard TeX & LaTeX !) :
\newcommand{\go}{\rightarrow%
        \typeout{use standard \TeX \verb|\to| instead of \verb|\go|}}
%% convergence in Probability, Distribution: \tendsto{P}, \tendsto{D} :
\newcommand{\tendsto}[1]{\buildrel {#1} \over \longrightarrow}
\newcommand{\wt}{\widetilde}
\newcommand{\wh}[1]{\if \sigma{#1}\widehat{\sigma}\else
{}\kern0.1em\widehat{\kern-0.1em#1}{}\fi}
\newcommand{\wb}[1]{{}\if Y#1\overline{Y}\else
\kern0.2em\overline{\kern-0.2em#1}\fi}
\newcommand{\Ssum}{\sum\nolimits}
\newcommand{\Sn}{\Ssum_{i=1}^n}
\newcommand{\Seq}[4]{#1_{#2},\,#1_{#3},\ldots,#1_{#4}}% siehe auch \Nl , \No (unten)
\newcommand{\Half}{{\textstyle 1\over2}}% siehe auch \half (unten)
\newcommand{\ul}[1]{\textbf{#1}}

\newcommand{\Hmu}{\widehat{\mu}}
\newcommand{\Halpha}{\widehat{\alpha}}
\newcommand{\Hbeta}{\widehat{\beta}}
\newcommand{\Hpi}{\widehat{\pi}}
%
\newcommand{\iid}{\mbox{ i.i.d. }}
\newcommand{\fs}{\mbox{f.s.}}
\newcommand{\Loglik}{\ell\kern-1pt\ell}

%%%------------ script und andere Spezialschriften ----------------------


\DeclareMathOperator{\N}{\mathcal{N}}% Normalverteilung
\renewcommand{\P}{\mathcal{P}}%--- RE-defining the standard \P (Paragraph)!!--
%%%
\DeclareMathOperator{\M}{\mathcal{M}}% Multinom ?
\DeclareMathOperator{\B}{\mathcal{B}}% Binom
\DeclareMathOperator{\Bern}{\mathcal{B}ernoulli}
\DeclareMathOperator{\F}{\mathcal{F}}
\DeclareMathOperator{\Wish}{\mathcal{W}}
\newcommand{\phibf}{\boldsymbol{\phi}}%{\phi\hskip-5.4pt\phi} % bold \phi

\DeclareSIUnit\molar{\mole\per\cubic\deci\metre}
\DeclareSIUnit\Molar{M}
\DeclareSIUnit\rpm{rpm}
\DeclareSIUnit\gravity{g}
\DeclareSIUnit\kilobase{kb}
\DeclareSIUnit\nucleotide{nt}
